<%- include('./partials/header.ejs') -%>

<h1>Index page</h1>

<%for (let i = 0; i < poems.length; i++){%>
  <div class="preview">
  <h2 class="titles"><%=poems[i].title%> <a href="/poems/<%=poems[i].id%>"> >> </a></h2>
  <p class="authors">By <%=poems[i].author%></p>
  <p class="contents"><%=poems[i].content%></p>
  <p><%=poems[i].time%></p>
  </div>
<%}%>

<script>
  const contents = document.querySelectorAll('.contents')
  for (content of contents) {
    let longer = false
    if (content.innerHTML.length > 300) {
      longer = true
    } else {
      longer = false
    }
    content.innerHTML = content.innerHTML.substring(0, 300);
    if (longer === true){
      content.innerHTML = content.innerHTML + "..."
    }
  }
</script>
<%- include('./partials/footer.ejs') -%>
